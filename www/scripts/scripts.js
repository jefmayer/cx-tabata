"use strict";var app=angular.module("cxTabataApp",["ngAnimate","ngResource","ngRoute","ngSanitize","ngTouch"]);app.run(["$rootScope",function(a){a.bgColor="rgba(200,200,200,1)"}]),app.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/setup.html",controller:"SetupCtrl"}).when("/setup",{templateUrl:"views/setup.html",controller:"SetupCtrl"}).when("/workout",{templateUrl:"views/workout.html",controller:"WorkoutCtrl"}).when("/summary",{templateUrl:"views/summary.html",controller:"SummaryCtrl"}).otherwise({redirectTo:"/"})}]);var storage=function(){};storage.data={workouts:[{name:"My 30 minute Tabata training interval",id:"01",time:1800,intervals:[{time:420,desc:"7 minutes easy."},{time:60,desc:"Increase by one gear"},{time:60,desc:"Increase by one gear"},{time:60,desc:"Increase by one gear"},{time:60,desc:"Increase by one gear"},{time:60,desc:"Increase by one gear"},{time:60,desc:"Increase by one gear"},{time:60,desc:"Increase by one gear"},{time:60,desc:"Increase by one gear"},{time:300,desc:"5 minutes easy"},{time:20,desc:"Tabata Intense"},{time:10,desc:"Tabata Recovery"},{time:20,desc:"Tabata Intense"},{time:10,desc:"Tabata Recovery"},{time:20,desc:"Tabata Intense"},{time:10,desc:"Tabata Recovery"},{time:20,desc:"Tabata Intense"},{time:10,desc:"Tabata Recovery"},{time:20,desc:"Tabata Intense"},{time:10,desc:"Tabata Recovery"},{time:20,desc:"Tabata Intense"},{time:10,desc:"Tabata Recovery"},{time:20,desc:"Tabata Intense"},{time:10,desc:"Tabata Recovery"},{time:20,desc:"Tabata Intense"},{time:10,desc:"Tabata Recovery"},{time:360,desc:"6 minutes easy"}]}]},app.controller("SetupCtrl",["$scope","$rootScope","$location",function(a,b,c){a.hideWorkoutList=!1,b.bgColor="rgba(200,200,200,1)",b.isWorkout=!1,a.addWorkout=function(){console.log("Add workout.")},a.loadWorkout=function(b){console.log("Load workout, "+b),a.hideWorkoutList=!0;var d=setTimeout(function(){clearTimeout(d),a.$apply(function(){c.path("/workout")})},200)}}]),app.controller("WorkoutCtrl",["$scope","$rootScope","$location",function(a,b,c){function d(a,b,c,d,e,f,g,h,i){void 0===g&&(g=128),void 0===h&&(h=127),void 0===i&&(i=50);for(var j=0;i>j;++j){var k=Math.round(Math.sin(a*j+d)*h+g),l=Math.round(Math.sin(b*j+e)*h+g),m=Math.round(Math.sin(c*j+f)*h+g);o.push("rgba("+k+","+l+","+m+",1)")}}function e(){h+=100,(h===j+l*m||i)&&(i=!1,l=parseInt(b.data.intervals[k].time),j=h,a.$apply(function(){a.interval.desc=b.data.intervals[k].desc,a.next.desc=b.data.intervals[k+1].desc}),k+=1),a.$apply(function(){var d;d=h===q?0:j+l*m-h,a.total.mins=f(Math.floor(h/n)),a.total.secs=f(Math.floor(h%n/m)),a.total.msecs=Math.floor(h%m)/100,a.interval.mins=f(Math.floor(d/n)),a.interval.secs=f(Math.floor(d%n/m)),a.interval.msecs=Math.floor(d%m)/100,h%1e4===0&&(b.bgColor=o[p],p+=1,p===o.length&&(p=0)),h===q&&(clearInterval(g),c.path("/summary"))})}function f(a){return a+="",a.length<2?"0"+a:a}b.data=storage.data.workouts[0],b.isWorkout=!0,a.interval={mins:"00",secs:"00",msecs:"0",desc:""},a.total={mins:"00",secs:"00",msecs:"0"},a.next={desc:""};var g,h=0,i=!0,j=0,k=0,l=0,m=1e3,n=60*m,o=[],p=0,q=b.data.time*m;d(.3,.3,.3,0,2,4),b.bgColor=o[0],g=setInterval(e,100),a.$on("$destroy",function(){console.log("destroy"),null!==g&&clearInterval(g)})}]),app.controller("SummaryCtrl",["$scope",function(a){console.log(a)}]);